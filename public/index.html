<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kuthedk's Olympic Medal Points System</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #333;
      color: #fff;
      text-align: center;
      transition: background-color 0.3s, color 0.3s;
    }

    body.light-mode {
      background-color: #fff;
      color: #000;
    }

    header {
      background-color: #000;
      color: #fff;
      padding: 20px 0;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
      transition: background-color 0.3s, color 0.3s;
    }

    header.light-mode {
      background-color: #fff;
      color: #000;
    }

    .container {
      max-width: 1000px;
      margin: auto;
      padding: 20px;
      background-color: #444;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      transition: background-color 0.3s, color 0.3s;
    }

    .container.light-mode {
      background-color: #f4f4f4;
    }

    .description {
      text-align: left;
      margin-top: 20px;
      padding: 20px;
      background-color: #555;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      transition: background-color 0.3s, color 0.3s;
    }

    .description.light-mode {
      background-color: #eaeaea;
    }

    .description h2 {
      color: #ffcc00;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .description.light-mode h2 {
      color: #d48806;
    }

    .chevron {
      border: solid #ffcc00;
      border-width: 0 3px 3px 0;
      display: inline-block;
      padding: 3px;
      transition: transform 0.3s;
    }

    .chevron.down {
      transform: rotate(45deg);
    }

    .chevron.up {
      transform: rotate(-135deg);
    }

    .description.light-mode .chevron {
      border-color: #d48806;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    table,
    th,
    td {
      border: 1px solid #666;
    }

    th,
    td {
      padding: 12px;
      text-align: center;
    }

    th {
      background-color: #000;
      color: white;
    }

    th.light-mode {
      background-color: #000;
      color: #fff;
    }

    tr:nth-child(even) {
      background-color: #555;
    }

    tr.light-mode:nth-child(even) {
      background-color: #eaeaea;
    }

    .flag {
      width: 30px;
      height: 20px;
      margin-left: 8px;
      vertical-align: middle;
    }

    .toggle-container {
      display: flex;
      align-items: center;
      position: absolute;
      right: 20px;
      top: 15px;
    }

    .toggle-label {
      margin-right: 10px;
    }

    .toggle {
      position: relative;
      width: 50px;
      height: 25px;
      -webkit-appearance: none;
      background: #ccc;
      outline: none;
      border-radius: 25px;
      box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
      transition: background 0.3s;
    }

    .toggle:checked {
      background: #66bb6a;
    }

    .toggle:before {
      content: "";
      position: absolute;
      top: 3px;
      left: 3px;
      width: 19px;
      height: 19px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      transition: left 0.3s;
    }

    .toggle:checked:before {
      left: 28px;
    }

    .credits {
      margin-top: 20px;
      font-size: 14px;
    }

    .credits a {
      color: #66bb6a;
      text-decoration: none;
      transition: color 0.3s;
    }

    .credits a:hover {
      color: #fff;
    }

    @media (max-width: 768px) {
      .toggle-container {
        top: 10px;
        right: 10px;
      }

      header h1 {
        font-size: 1.5em;
        padding: 10px 0;
      }

      .container {
        padding: 10px;
      }

      .description h2 {
        font-size: 1.2em;
      }

      table,
      th,
      td {
        font-size: 12px;
      }

      .flag {
        width: 15px;
        height: 10px;
      }
    }

    @media (max-width: 480px) {
      .toggle-container {
        top: 5px;
        right: 5px;
      }

      header h1 {
        font-size: 1.2em;
        padding: 5px 0;
      }

      .container {
        padding: 5px;
      }

      .description h2 {
        font-size: 1em;
      }

      table,
      th,
      td {
        font-size: 10px;
      }

      .flag {
        width: 12px;
        height: 8px;
      }
    }
  </style>
  <script type="module" defer>
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyAwLeHdH7IZT0WhRCZnzz9ijH9TdY_gfEA",
      authDomain: "olympic-medal-tracker.firebaseapp.com",
      projectId: "olympic-medal-tracker",
      storageBucket: "olympic-medal-tracker.appspot.com",
      messagingSenderId: "443481946432",
      appId: "1:443481946432:web:3d1fd43c7333b307ffe2a5",
      measurementId: "G-EZGKTP52D9"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  </script>
</head>

<body class="dark-mode">

  <header>
    <h1>Kuthedk's Olympic Medal Points System</h1>
    <div class="toggle-container">
      <span class="toggle-label">Dark Mode</span>
      <input type="checkbox" id="dark-mode-toggle" class="toggle" checked>
    </div>
  </header>

  <div class="container">
    <div class="description">
      <h2 onclick="toggleDescription()">Why This Olympic Points System Shines: A Balanced Approach to Medal Valuation
        <span id="chevron" class="chevron down"></span>
      </h2>
      <div id="description-content">
        <p>üéâ Welcome to my upgraded Olympic Points System! I believe every medal should be celebrated and valued
          fairly.
          My system awards points as follows: 25 points for gold ü•á, 10 points for silver ü•à, and 4 points for bronze
          ü•â.
          This 2.5x multiplication pattern ensures a balanced and accurate reflection of athletic achievements.</p>

        <h3>Why This System Works</h3>
        <ul>
          <li><strong>üîç Clear and Balanced Differentiation:</strong> The 2.5x factor establishes a significant yet fair
            distinction between medal types. Gold medals are given the highest value, reflecting their prestige, while
            silver and bronze medals are also rightfully rewarded. This mirrors the competitive spirit of the Olympics,
            where every medal counts.</li>

          <li><strong>üèÖ Encourages Pursuit of Excellence:</strong> Our system motivates athletes to aim for the top!
            Gold
            medals hold the most value, but winning any medal is highly rewarding. This drives athletes to push their
            limits
            and perform their best across all events, promoting a culture of excellence and perseverance.</li>

          <li><strong>‚öñÔ∏è Maintains Competitive Balance:</strong> By avoiding extreme point disparities, my system
            ensures
            that no single medal type is disproportionately favored. This balanced approach maintains fair competition,
            where silver and bronze medals contribute proportionally to the overall score, ensuring a fair and
            comprehensive ranking.</li>

          <li><strong>üåç Fair Representation of Athletic Prowess:</strong> Countries with a diverse collection of gold,
            silver, and bronze medals are accurately represented in the rankings. This method showcases the overall
            athletic
            strength of nations excelling in various events, providing a more comprehensive picture of their prowess.
          </li>

          <li><strong>üëÄ Enhances Viewer Understanding and Engagement:</strong> The straightforward 2.5x pattern is easy
            for
            viewers to understand, making the competition more transparent and enjoyable. Fans can easily grasp the
            rationale behind the rankings, enhancing their engagement and making the games more exciting to follow.</li>
        </ul>

        <h3>Conclusion</h3>
        <p>My points system celebrates all victories, giving the highest achievements their due recognition. It
          motivates
          athletes, rewards comprehensive excellence, and enhances viewer engagement. Let's support a system that truly
          embodies the spirit of athletic excellence and fair play! üåü</p>
      </div>
    </div>

    <h2>Current Medal Rankings</h2>
    <table>
      <thead>
        <tr>
          <th>Rank</th>
          <th>Country</th>
          <th>Gold</th>
          <th>Silver</th>
          <th>Bronze</th>
          <th>Total Points</th>
        </tr>
      </thead>
      <tbody id="medal-table">
        <!-- Medal data will be inserted here by JavaScript -->
      </tbody>
    </table>

  </div>

  <script defer>
    async function fetchMedalData() {
      try {
        const response = await fetch('https://api.olympics.kevle.xyz/medals');
        const data = await response.json();
        const countryFlags = await fetchCountryFlags();
        return data.results.map(result => ({
          country: result.country.name,
          flag: countryFlags[result.country.iso_alpha_2] || countryFlags[result.country.iso_alpha_3] || countryFlags[result.country.code.toLowerCase()] || '',
          gold: result.medals.gold,
          silver: result.medals.silver,
          bronze: result.medals.bronze
        }));
      } catch (error) {
        console.error('Error fetching medal data:', error);
        return [];
      }
    }

    async function fetchCountryFlags() {
      try {
        const response = await fetch('https://restcountries.com/v3.1/all');
        const data = await response.json();
        return data.reduce((acc, country) => {
          acc[country.cca2] = country.flags.png;
          acc[country.cca3] = country.flags.png;
          acc[country.name.common.toLowerCase()] = country.flags.png;
          return acc;
        }, {});
      } catch (error) {
        console.error('Error fetching country flags:', error);
        return {};
      }
    }

    function calculatePoints(data) {
      return data.map(entry => ({
        ...entry,
        points: entry.gold * 25 + entry.silver * 10 + entry.bronze * 4
      })).sort((a, b) => b.points - a.points);
    }

    function renderTable(data) {
      const tableBody = document.getElementById("medal-table");
      tableBody.innerHTML = "";
      data.forEach((entry, index) => {
        const row = `<tr>
          <td>${index + 1}</td>
          <td>${entry.country} ${entry.flag ? `<img src="${entry.flag}" alt="${entry.country} flag" class="flag">` : ''}</td>
          <td>${entry.gold}</td>
          <td>${entry.silver}</td>
          <td>${entry.bronze}</td>
          <td>${entry.points}</td>
        </tr>`;
        tableBody.innerHTML += row;
      });
    }

    function toggleDescription() {
      const content = document.getElementById('description-content');
      const chevron = document.getElementById('chevron');
      if (content.style.display === 'none' || content.style.display === '') {
        content.style.display = 'block';
        chevron.classList.remove('up');
        chevron.classList.add('down');
      } else {
        content.style.display = 'none';
        chevron.classList.remove('down');
        chevron.classList.add('up');
      }
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      document.body.classList.toggle('light-mode');
      document.querySelector('header').classList.toggle('dark-mode');
      document.querySelector('header').classList.toggle('light-mode');
      document.querySelector('.container').classList.toggle('dark-mode');
      document.querySelector('.container').classList.toggle('light-mode');
      document.querySelector('.description').classList.toggle('dark-mode');
      document.querySelector('.description').classList.toggle('light-mode');
      document.querySelectorAll('th').forEach(th => th.classList.toggle('dark-mode'));
      document.querySelectorAll('th').forEach(th => th.classList.toggle('light-mode'));
      document.querySelectorAll('tr:nth-child(even)').forEach(tr => tr.classList.toggle('dark-mode'));
      document.querySelectorAll('tr:nth-child(even)').forEach(tr => tr.classList.toggle('light-mode'));
    }

    document.getElementById('dark-mode-toggle').addEventListener('change', toggleDarkMode);

    (async function () {
      const medalData = await fetchMedalData();
      const rankedData = calculatePoints(medalData);
      renderTable(rankedData);
    })();
  </script>

  <footer>
    <div class="credits">
      <p>Website by Alex Moss. Data provided by the unofficial <a href="https://api.olympics.kevle.xyz/medals"
          target="_blank">Paris 2024 Olympic Medals API</a>. Follow me on <a href="https://github.com/kuthedk"
          target="_blank">GitHub</a> and <a href="https://www.threads.net/@kuthedk" target="_blank">Threads</a>.</p>
      <p>All trademarks, data, and other relevant properties are the copyright and property of the International Olympic
        Committee (IOC). No claims are made to these properties.</p>
      <p>&copy; 2024 Alex Moss. All Rights Reserved.</p>
    </div>
  </footer>

</body>

</html>